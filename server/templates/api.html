<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Small and simple online file sharing & pastebin" />
    <title>API Documentation - Fileigloo</title>

    <link rel="preconnect" href="https://fonts.bunny.net" />
    <link rel="stylesheet" href="https://fonts.bunny.net/css?family=cantarell:400" />

    <link rel="preload" href="/static/pcss-1.1.2.min.css" as="style" />

    <link rel="icon" href="/static/favicon.ico" />
    <link rel="stylesheet" href="/static/pcss-1.1.2.min.css" />

    <style>
        body {
            font-family: 'Cantarell', sans-serif;
        }

        footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
        }

        .api-section {
            margin-bottom: 2rem;
        }

        .api-section h2 {
            color: #4ea7ff;
            border-bottom: 1px solid #324759;
            padding-bottom: 0.5rem;
        }

        .api-section h3 {
            color: #dbdbdb;
            margin-top: 1.5rem;
        }

        .code-block {
            background: #161f27;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: monospace;
            border: 1px solid #324759;
        }

        .code-block code {
            color: #dbdbdb;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .endpoint {
            background: #1a242f;
            border-radius: 4px;
            padding: 0.5rem;
            margin: 0.5rem 0;
            font-family: monospace;
            color: #4ea7ff;
        }

        .method {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-weight: bold;
            margin-right: 0.5rem;
            font-size: 0.8rem;
        }

        .method.post {
            background: #28a745;
            color: white;
        }

        .method.get {
            background: #007bff;
            color: white;
        }

        .parameter {
            background: #2a3441;
            border-radius: 4px;
            padding: 0.3rem 0.5rem;
            margin: 0.2rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .parameter-name {
            color: #ffc107;
            font-weight: bold;
        }

        .parameter-type {
            color: #6c757d;
            font-style: italic;
        }

        .response-example {
            background: #0d1421;
            border-left: 3px solid #28a745;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 6px 6px 0;
        }

        ul {
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <main>
        <center>
            <a href="/">
                <svg width="84" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 211.41137855579868 163">
                    <g fill="white"
                        transform="matrix(4.201313018798828,0,0,4.201313018798828,-4.119259834289551,95.94310760498047)">
                        <path
                            d="M2.52 7.98L6.23 7.98L6.23 6.58L2.52 6.58L2.52 4.20L6.37 4.20L6.37 2.80L0.98 2.80L0.98 12.60L2.52 12.60ZM7.77 3.64C7.77 3.89 7.86 4.11 8.05 4.28C8.24 4.46 8.46 4.55 8.72 4.55C8.98 4.55 9.21 4.46 9.39 4.28C9.58 4.11 9.67 3.89 9.67 3.64C9.67 3.39 9.58 3.17 9.39 3.00C9.21 2.82 8.98 2.73 8.72 2.73C8.46 2.73 8.24 2.82 8.05 3.00C7.86 3.17 7.77 3.39 7.77 3.64ZM7.98 6.16L7.98 12.60L9.46 12.60L9.46 6.16ZM11.21 1.68L11.21 12.60L12.68 12.60L12.68 1.68ZM19.10 8.69L15.54 8.69C15.61 8.26 15.82 7.92 16.18 7.66C16.54 7.41 16.95 7.28 17.42 7.28C18.41 7.28 18.97 7.75 19.10 8.69ZM15.51 9.73L20.64 9.73C20.65 9.61 20.66 9.45 20.66 9.25C20.66 8.25 20.37 7.45 19.78 6.88C19.19 6.31 18.41 6.02 17.42 6.02C16.41 6.02 15.59 6.33 14.96 6.96C14.33 7.59 14.01 8.40 14.01 9.38C14.01 10.38 14.32 11.19 14.92 11.81C15.52 12.43 16.35 12.74 17.42 12.74C18.83 12.74 19.86 12.24 20.51 11.24L19.40 10.56C19.05 11.13 18.39 11.41 17.42 11.41C16.90 11.41 16.47 11.27 16.13 10.98C15.78 10.69 15.58 10.27 15.51 9.73ZM21.71 3.64C21.71 3.89 21.81 4.11 21.99 4.28C22.18 4.46 22.40 4.55 22.67 4.55C22.93 4.55 23.15 4.46 23.34 4.28C23.52 4.11 23.62 3.89 23.62 3.64C23.62 3.39 23.52 3.17 23.34 3.00C23.15 2.82 22.93 2.73 22.67 2.73C22.40 2.73 22.18 2.82 21.99 3.00C21.81 3.17 21.71 3.39 21.71 3.64ZM21.92 6.16L21.92 12.60L23.41 12.60L23.41 6.16ZM26.15 9.38C26.15 8.73 26.34 8.22 26.72 7.87C27.10 7.52 27.59 7.35 28.21 7.35C28.76 7.35 29.23 7.52 29.62 7.85C30.00 8.18 30.20 8.69 30.20 9.38C30.20 10.07 30.00 10.58 29.62 10.91C29.23 11.24 28.76 11.41 28.21 11.41C27.59 11.41 27.10 11.23 26.72 10.88C26.34 10.54 26.15 10.03 26.15 9.38ZM24.72 13.02C24.72 13.92 25.03 14.63 25.66 15.16C26.28 15.69 27.10 15.96 28.13 15.96C29.08 15.96 29.91 15.65 30.61 15.04C31.32 14.43 31.67 13.57 31.67 12.46L31.67 6.16L30.20 6.16L30.20 7.31C29.68 6.45 28.93 6.02 27.93 6.02C27.01 6.02 26.23 6.31 25.61 6.90C24.98 7.49 24.67 8.32 24.67 9.38C24.67 10.44 24.98 11.27 25.61 11.86C26.23 12.45 27.01 12.74 27.93 12.74C28.93 12.74 29.68 12.31 30.20 11.45L30.20 12.46C30.20 13.15 29.99 13.67 29.58 14.03C29.16 14.38 28.68 14.56 28.13 14.56C27.53 14.56 27.06 14.41 26.72 14.11C26.38 13.80 26.21 13.44 26.21 13.02ZM33.49 1.68L33.49 12.60L34.96 12.60L34.96 1.68ZM36.29 9.38C36.29 10.40 36.63 11.21 37.30 11.82C37.98 12.43 38.82 12.74 39.83 12.74C40.84 12.74 41.68 12.43 42.36 11.82C43.03 11.21 43.37 10.40 43.37 9.38C43.37 8.36 43.03 7.55 42.36 6.94C41.68 6.33 40.84 6.02 39.83 6.02C38.82 6.02 37.98 6.33 37.30 6.94C36.63 7.55 36.29 8.36 36.29 9.38ZM37.77 9.38C37.77 8.75 37.96 8.26 38.35 7.90C38.73 7.53 39.22 7.35 39.83 7.35C40.44 7.35 40.93 7.53 41.31 7.90C41.70 8.26 41.89 8.75 41.89 9.38C41.89 10.01 41.70 10.50 41.31 10.86C40.93 11.23 40.44 11.41 39.83 11.41C39.22 11.41 38.73 11.23 38.35 10.86C37.96 10.50 37.77 10.01 37.77 9.38ZM44.21 9.38C44.21 10.40 44.55 11.21 45.23 11.82C45.90 12.43 46.75 12.74 47.75 12.74C48.76 12.74 49.60 12.43 50.28 11.82C50.96 11.21 51.30 10.40 51.30 9.38C51.30 8.36 50.96 7.55 50.28 6.94C49.60 6.33 48.76 6.02 47.75 6.02C46.75 6.02 45.90 6.33 45.23 6.94C44.55 7.55 44.21 8.36 44.21 9.38ZM45.70 9.38C45.70 8.75 45.89 8.26 46.27 7.90C46.65 7.53 47.15 7.35 47.75 7.35C48.36 7.35 48.86 7.53 49.24 7.90C49.62 8.26 49.81 8.75 49.81 9.38C49.81 10.01 49.62 10.50 49.24 10.86C48.86 11.23 48.36 11.41 47.75 11.41C47.15 11.41 46.65 11.23 46.27 10.86C45.89 10.50 45.70 10.01 45.70 9.38Z">
                        </path>
                    </g>
                    <g
                        transform="matrix(2.45080304145813,0,0,2.45080304145813,47.391700744628906,-13.126762390136719)"
                        stroke="none" fill="white">
                        <path
                            d="M29.4 42.3c-.5 0-1-.2-1.3-.5-.4-.4-.6-.9-.6-1.5v-8.2c0-2.2-1.5-4.1-3.4-4.1s-3.4 1.8-3.4 4.1v8.2c0 .6-.2 1.1-.6 1.5-.4.4-1 .6-1.5.5C7.7 41.2.7 37.3.7 32.4v-.2C.7 18 10.9 6.1 23.3 5.6h.9c13 0 23.5 11.7 23.5 26v.7c0 4.9-7 8.8-17.9 9.9-.3.1-.3.1-.4.1zM24 9.6h-.7C12.9 10 4.4 20.2 4.4 32.3v.2c0 1.8 4.2 4.6 12.2 5.7v-6c0-4.4 3.3-8 7.3-8 4.1 0 7.4 3.6 7.4 8v6c8-1.2 12.2-4 12.2-5.7v-.7C43.6 19.5 34.8 9.6 24 9.6z">
                        </path>
                    </g>
                </svg>
            </a>
        </center>

        {{template "navigation" .}}

        <div class="api-section">
            <h2>API Documentation</h2>
            <p>Fileigloo provides a simple REST API for uploading and downloading files programmatically. All endpoints support standard HTTP methods and return appropriate status codes.</p>
        </div>

        <div class="api-section">
            <h2>Base URL</h2>
            <div class="endpoint">
                {{.baseURL}}
            </div>
        </div>

        <div class="api-section">
            <h2>Authentication</h2>
            <p>If your Fileigloo instance is password-protected, you'll need to authenticate first by obtaining a session cookie.</p>
            
            <h3>Login</h3>
            <div class="endpoint">
                <span class="method post">POST</span> /login
            </div>
            
            <div class="parameter">
                <span class="parameter-name">site-password</span> <span class="parameter-type">(form field, required)</span> - The site password
            </div>

            <div class="code-block">
                <pre># Login and save cookies
curl -c cookies.txt -X POST \
-d "site-password=your_password" \
{{.baseURL}}/login</pre>
            </div>
        </div>

        <div class="api-section">
            <h2>File Upload</h2>
            <p>Upload files using multipart/form-data. The API will return an HTML page with the file URL.</p>
            
            <div class="endpoint">
                <span class="method post">POST</span> /
            </div>
            
            <div class="parameter">
                <span class="parameter-name">file</span> <span class="parameter-type">(file field, required)</span> - The file to upload
            </div>

            <div class="parameter">
                <span class="parameter-name">password</span> <span class="parameter-type">(form field, optional)</span> - Password to protect the file
            </div>

            <div class="parameter">
                <span class="parameter-name">Accept</span> <span class="parameter-type">(header, optional)</span> - Set to "application/json" for JSON response
            </div>

            <h3>Example: Upload a file</h3>
            <div class="code-block">
                <pre># Upload a file and get a JSON response
curl -X POST \
  -H "Accept: application/json" \
  -F "file=@/path/to/your/file.txt" \
  {{.baseURL}}/</pre>
            </div>

            <h3>Example: Upload a password-protected file</h3>
            <div class="code-block">
                <pre># Upload a file with password protection
curl -X POST \
  -H "Accept: application/json" \
  -F "file=@/path/to/your/file.txt" \
  -F "password=your_secret_password" \
  {{.baseURL}}/</pre>
            </div>

            <div class="response-example">
                <h4>JSON Response:</h4>
                <pre>{
  "fileId": "abc123def456",
  "fileUrl": "{{.baseURL}}/view/abc123def456"
}</pre>
            </div>

            <h3>Example: Upload a file (password-protected instance)</h3>
            <div class="code-block">
                <pre># First login and save cookies
curl -c cookies.txt -X POST \
  -d "site-password=your_password" \
  {{.baseURL}}/login

# Then upload using the saved cookies
curl -b cookies.txt -X POST \
  -H "Accept: application/json" \
  -F "file=@/path/to/your/file.txt" \
  {{.baseURL}}/</pre>
            </div>
        </div>

        <div class="api-section">
            <h2>Pastebin</h2>
            <p>Create text pastes by sending text content in a form.</p>
            
            <div class="endpoint">
                <span class="method post">POST</span> /
            </div>
            
            <div class="parameter">
                <span class="parameter-name">text</span> <span class="parameter-type">(form field, required)</span> - The text content to paste
            </div>

            <div class="parameter">
                <span class="parameter-name">password</span> <span class="parameter-type">(form field, optional)</span> - Password to protect the paste
            </div>

            <div class="parameter">
                <span class="parameter-name">Accept</span> <span class="parameter-type">(header, optional)</span> - Set to "application/json" for JSON response
            </div>

            <h3>Example: Create a paste</h3>
            <div class="code-block">
                <pre># Create a text paste and get a JSON response
curl -X POST \
  -H "Accept: application/json" \
  -d "text=Hello, World!" \
  {{.baseURL}}/</pre>
            </div>

            <h3>Example: Create a password-protected paste</h3>
            <div class="code-block">
                <pre># Create a password-protected text paste
curl -X POST \
  -H "Accept: application/json" \
  -d "text=Secret message" \
  -d "password=your_secret_password" \
  {{.baseURL}}/</pre>
            </div>

            <div class="response-example">
                <h4>JSON Response:</h4>
                <pre>{
  "fileId": "def456ghi789",
  "fileUrl": "{{.baseURL}}/view/def456ghi789"
}</pre>
            </div>

            <h3>Example: Create a paste from file content</h3>
            <div class="code-block">
                <pre># Create a paste from file content
curl -X POST \
  --data-urlencode "text@/path/to/your/file.txt" \
  {{.baseURL}}/</pre>
            </div>
        </div>

        <div class="api-section">
            <h2>File Download</h2>
            <p>Download uploaded files using their file ID. Files can be viewed inline or downloaded as attachments.</p>
            
            <h3>Download file as attachment</h3>
            <div class="endpoint">
                <span class="method get">GET</span> /download/{fileId}
            </div>

            <div class="code-block">
                <pre># Download a file
curl -O {{.baseURL}}/download/abc123def456</pre>
            </div>

            <h3>View file inline (for supported types)</h3>
            <div class="endpoint">
                <span class="method get">GET</span> /view/{fileId}
            </div>

            <div class="code-block">
                <pre># View a file inline (e.g., text files, images)
curl {{.baseURL}}/view/abc123def456</pre>
            </div>
        </div>

        <div class="api-section">
            <h2>Password-Protected Files</h2>
            <p>Files can be protected with passwords using Argon2id hashing. When accessing password-protected files, you'll need to provide the password via a POST request.</p>
            
            <h3>Access password-protected file</h3>
            <div class="endpoint">
                <span class="method post">POST</span> /download/{fileId}
            </div>
            <div class="endpoint">
                <span class="method post">POST</span> /view/{fileId}
            </div>

            <div class="parameter">
                <span class="parameter-name">password</span> <span class="parameter-type">(form field, required)</span> - The password for the protected file
            </div>

            <h3>Example: Access a password-protected file</h3>
            <div class="code-block">
                <pre># First, try to access the file (will return password form if protected)
curl {{.baseURL}}/view/abc123def456

# If password-protected, provide password via POST
curl -X POST \
  -d "password=your_secret_password" \
  {{.baseURL}}/view/abc123def456</pre>
            </div>

            <h3>Example: Download password-protected file</h3>
            <div class="code-block">
                <pre># Download a password-protected file
curl -X POST \
  -d "password=your_secret_password" \
  -o downloaded_file.txt \
  {{.baseURL}}/download/abc123def456</pre>
            </div>

            <div class="response-example">
                <h4>Password Form Response (when accessing protected file via GET):</h4>
                <pre>HTTP/1.1 200 OK
Content-Type: text/html

&lt;!-- HTML password form will be returned --&gt;</pre>
            </div>

            <div class="response-example">
                <h4>Incorrect Password Response:</h4>
                <pre>HTTP/1.1 200 OK
Content-Type: text/html

&lt;!-- HTML password form with error message --&gt;</pre>
            </div>
        </div>



        <div class="api-section">
            <h2>Response Codes</h2>
            <ul>
                <li><strong>200 OK</strong> - File uploaded successfully, file retrieved, or password form displayed</li>
                <li><strong>400 Bad Request</strong> - Invalid request format or missing required fields</li>
                <li><strong>401 Unauthorized</strong> - Authentication required or failed (for site password)</li>
                <li><strong>404 Not Found</strong> - File not found</li>
                <li><strong>413 Request Entity Too Large</strong> - File exceeds maximum upload size</li>
                <li><strong>500 Internal Server Error</strong> - Server error</li>
            </ul>
        </div>

        <div class="api-section">
            <h2>Security Features</h2>
            <h3>Password Protection</h3>
            <ul>
                <li><strong>Argon2id Hashing</strong> - All file passwords are hashed using Argon2id with secure parameters</li>
                <li><strong>Salt Generation</strong> - Each password uses a unique cryptographically secure random salt</li>
                <li><strong>No Password Storage</strong> - Only password hashes are stored, never plain text passwords</li>
                <li><strong>Optional Protection</strong> - Files can be uploaded with or without password protection</li>
            </ul>
            
            <h3>Argon2id Parameters</h3>
            <div class="parameter">
                <span class="parameter-name">Memory:</span> 64 KB
            </div>
            <div class="parameter">
                <span class="parameter-name">Iterations:</span> 1
            </div>
            <div class="parameter">
                <span class="parameter-name">Parallelism:</span> 4
            </div>
            <div class="parameter">
                <span class="parameter-name">Key Length:</span> 32 bytes
            </div>
            <div class="parameter">
                <span class="parameter-name">Salt Length:</span> 16 bytes
            </div>
        </div>

        <div class="api-section">
            <h2>Rate Limiting</h2>
            <p>Fileigloo implements rate limiting per IP address. If you exceed the rate limit, you'll receive a <strong>429 Too Many Requests</strong> response.</p>
        </div>

        <footer>
            <div>
                Copyright (c) {{ now.UTC.Year }} by <a href="https://kamilmarut.com" target="_blank" rel="noopener noreferrer">Kamil Marut</a>
            </div>
            <a href="https://github.com/exler/fileigloo" target="_blank" rel="noopener noreferrer">
                <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="white">
                    <title>GitHub</title>
                    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
            </a>
        </footer>
    </main>
</body>

</html>
